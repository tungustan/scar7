<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Short-form Drama Showcase</title>
    <script src="https://assets.mediadelivery.net/playerjs/playerjs-latest.min.js"></script>
    <style>
        :root { --main-red: #ff3e3e; --bg: #000000; --sidebar: #121212; }
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: var(--bg); color: white; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; overflow: hidden; }
        
        /* 전체 구조 */
        .container { display: flex; flex-direction: column; height: 100vh; }

        /* 플레이어 영역: 모바일에서 꽉 차게 */
        .viewer { flex: 1; display: flex; align-items: center; justify-content: center; background: #000; position: relative; }
        .video-box { width: 100%; height: 100%; max-width: 500px; aspect-ratio: 9/16; position: relative; }
        iframe { width: 100%; height: 100%; border: none; }

        /* 자동재생 알림 라벨 */
        #auto-next-badge { position: absolute; top: 20px; left: 50%; transform: translateX(-50%); background: rgba(255, 62, 62, 0.8); padding: 8px 15px; border-radius: 20px; font-size: 12px; z-index: 10; display: none; }

        /* 하단 에피소드 리스트 (모바일용 가로 스크롤) */
        .sidebar { height: 150px; background: var(--sidebar); border-top: 1px solid #222; display: flex; flex-direction: column; flex-shrink: 0; }
        .header { padding: 12px 20px; border-bottom: 1px solid #222; }
        .header h1 { font-size: 16px; margin: 0; color: var(--main-red); }
        .header p { font-size: 11px; color: #888; margin: 4px 0 0 0; }

        .list { display: flex; overflow-x: auto; padding: 10px; gap: 12px; -webkit-overflow-scrolling: touch; }
        .item { min-width: 100px; display: flex; flex-direction: column; gap: 8px; cursor: pointer; transition: 0.2s; position: relative; }
        
        /* 썸네일 스타일 */
        .thumb { width: 100px; height: 56px; background: #333; border-radius: 6px; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 14px; border: 2px solid transparent; }
        .item.active .thumb { border-color: var(--main-red); background: #222; color: var(--main-red); }
        
        .info .title { font-weight: bold; font-size: 12px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

        /* PC 버전 레이아웃 (화면이 넓어질 때) */
        @media (min-width: 768px) {
            .container { flex-direction: row; }
            .sidebar { width: 350px; height: 100vh; border-top: none; border-left: 1px solid #222; }
            .list { flex-direction: column; overflow-x: hidden; overflow-y: auto; }
            .item { min-width: auto; flex-direction: row; align-items: center; padding: 10px; }
            .thumb { width: 60px; height: 90px; flex-shrink: 0; }
            .info .title { white-space: normal; font-size: 14px; }
        }
    </style>
</head>
<body>

    <div class="container">
        <div class="viewer">
            <div id="auto-next-badge">잠시 후 다음 에피소드가 재생됩니다...</div>
            <div class="video-box">
                <iframe id="main-player" src="" allow="autoplay; fullscreen" allowfullscreen></iframe>
            </div>
        </div>

        <aside class="sidebar">
            <div class="header">
                <h1>투자자용 쇼케이스</h1>
                <p>숏폼 드라마 [비밀의 숲] - 전체 에피소드</p>
            </div>
            <div class="list" id="epi-list">
                </div>
        </aside>
    </div>

    <script>
        const LIBRARY_ID = "603895"; 
        const episodes = [
            { id: "6ec8e88e-b89f-4f6e-acb2-3fd9b588a959", title: "1화: 충격적인 오프닝" },
            { id: "c60c1de4-a954-46ce-b2d3-79291627b9f1", title: "2화: 엇갈린 선택" },
            { id: "fb60b9b0-5cd3-4578-bf35-bbc6aef607db", title: "3화: 밝혀지는 진실" }
        ];

        let currentIdx = 0;
        const playerIframe = document.getElementById('main-player');
        const listDiv = document.getElementById('epi-list');
        const badge = document.getElementById('auto-next-badge');

        function playVideo(index) {
            if (index >= episodes.length) return; // 마지막 화면 멈춤
            
            currentIdx = index;
            const video = episodes[index];
            
            // Bunny.net URL 설정 (autoplay=true 필수)
            playerIframe.src = `https://iframe.mediadelivery.net/embed/${LIBRARY_ID}/${video.id}?autoplay=true`;
            
            updateListUI(index);
            attachPlayerEvents(); // 영상 종료 감지 시작
        }

        // 영상이 끝나는지 감지하는 함수
        function attachPlayerEvents() {
            const player = new playerjs.Player(playerIframe);
            
            player.on('ready', () => {
                player.play(); // 준비되면 바로 재생
            });

            player.on('ended
