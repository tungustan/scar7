<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>숏폼 드라마 플레이어 (JW Player)</title>

<!-- JW Player 무료 체험/라이선스 적용 필요 -->
<script src="https://cdn.jwplayer.com/libraries/your_jwplayer_key.js"></script>

<style>
html, body { margin:0; padding:0; height:100vh; width:100vw; background:black; font-family:-apple-system,BlinkMacSystemFont,Arial; overflow:hidden; }
#app { width:100%; height:100%; padding:15px; box-sizing:border-box; }
.archive-title { color:white; text-align:center; font-size:20px; font-weight:bold; margin-bottom:15px; }
.grid { display:grid; grid-template-columns:repeat(2,1fr); gap:10px; }
.card { width:100%; aspect-ratio:4/3; border-radius:10px; background:#111; background-size:cover; background-position:center; cursor:pointer; transition:transform .2s; }
.card:active { transform:scale(.95); }
#playerScreen { display:none; position:fixed; inset:0; background:black; z-index:100; }
.back { position:absolute; top:env(safe-area-inset-top,20px); left:20px; color:white; font-weight:bold; cursor:pointer; z-index:10; }
</style>
</head>
<body>
<div id="app">
  <div id="archive">
    <div class="archive-title">숏폼 드라마 라이브러리</div>
    <div class="grid" id="grid"></div>
  </div>
  <div id="playerScreen">
    <div class="back" onclick="goBack()">← Back</div>
    <div id="jwPlayerContainer"></div>
  </div>
</div>

<script>
const pullZoneUrl = "https://vz-af7f48b7-cd1.b-cdn.net";
const videos = [
  { url: `${pullZoneUrl}/6ec8e88e-b89f-4f6e-acb2-3fd9b588a959/playlist.m3u8`, poster: "https://antiscar-poster.b-cdn.net/poster01.jpeg" },
  { url: `${pullZoneUrl}/c60c1de4-a954-46ce-b2d3-79291627b9f1/playlist.m3u8`, poster: "https://antiscar-poster.b-cdn.net/poster02.jpeg" },
  { url: `${pullZoneUrl}/fb60b9b0-5cd3-4578-bf35-bbc6aef607db/playlist.m3u8`, poster: "https://antiscar-poster.b-cdn.net/poster03.jpeg" }
];

const grid = document.getElementById("grid");
const playerScreen = document.getElementById("playerScreen");
let currentIndex = 0;
let playerInstance;

// 카드 생성
videos.forEach((v,i)=>{
  const card = document.createElement("div");
  card.className="card";
  card.style.backgroundImage = `url(${v.poster})`;
  card.onclick = ()=>startVideo(i);
  grid.appendChild(card);
});

// 영상 시작
function startVideo(index){
  currentIndex = index;
  document.getElementById("archive").style.display="none";
  playerScreen.style.display="block";

  const video = videos[currentIndex];

  if(playerInstance) { playerInstance.remove(); }

  playerInstance = jwplayer("jwPlayerContainer").setup({
    file: video.url,
    image: video.poster,
    width: "100%",
    aspectratio: "16:9",
    autostart: true,
    controls: true,
    stretching: "uniform",
    repeat: false
  });

  playerInstance.on('complete', () => {
    if(currentIndex < videos.length - 1) {
      startVideo(currentIndex + 1); // 연속재생
    } else {
      goBack();
    }
  });
}

// 뒤로가기
function goBack(){
  if(playerInstance) playerInstance.stop();
  playerScreen.style.display="none";
  document.getElementById("archive").style.display="block";
}
</script>
</body>
</html>
